<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>The HTML5 Herald</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">

  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.0.6/material.yellow-light_blue.min.css">
  <script src="https://storage.googleapis.com/code.getmdl.io/1.0.6/material.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <link rel="stylesheet" href="css/styles.css?v=1.0">


<style>
      #map {
        width: 100%;
        height: 100%;
      }
      .page-content {

        height : 90vh;
        width: 100%;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <script>
      function initialize() {
        var mapCanvas = document.getElementById('map');
        var mapOptions = {
          center: new google.maps.LatLng(34.0667, -118.0833),
          zoom: 10,
          mapTypeId: google.maps.MapTypeId.ROADMAP


        }
        var map = new google.maps.Map(mapCanvas, mapOptions)
        var infowindowclick = new google.maps.InfoWindow({
          content: "testWindow"
        })
        var infowindowhover = new google.maps.InfoWindow({
          content: "hover window"
        })

        $.getJSON( "https://infobase-stage.cru.org/api/v1/govt_scorecard.json", function( data ){ 
          $.each( data.govt_scorecard, function(key, val) {
                var marker = new google.maps.Marker( {
                  position: {lat: Number(val.LATITUDE), lng: Number(val.LONGITUDE) } ,

                  map: map,
                  title: val.name,
                  campus: val
                })
                marker.addListener('click', function(a,b,c) {

                 // <!DOCTYPE html>
                 // <title>Page Title</title>
                  // <h1>This is a heading</h>
                  // <p>This is a paragraph</p>
                 // google.maps.event.addListener(marker, 'click', function() {
        // infowindow.setContent('<div><strong>' + place.name + '</strong><br>' +
        //   'Place ID: ' + place.place_id + '<br>' +
        //   place.formatted_address + '</div>');
        // infowindow.open(map, this);


                  var campus = this.campus
                  infowindowclick.setContent(campus.name)
                  infowindowclick.open(map, marker);
                })
                marker.addListener('mouseover', function(a,b,c) {
                  var campus = this.campus
                  infowindowhover.setContent(campus.name)
                  infowindowhover.open(map, marker);
                })
          })
        })
      }
      google.maps.event.addDomListener(window, 'load', initialize);

    </script>
</head>


<body>
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    <header class="mdl-layout__header">
      <div class="mdl-layout__header-row">
        <!-- Title -->
        <span class="mdl-layout-title">Title</span>
        <!-- Add spacer, to align navigation to the right -->
        <div class="mdl-layout-spacer"></div>
        <!-- Navigation. We hide it in small screens. -->
      </div>
    </header>
    <main class="mdl-layout__content">
      <div class="page-content">
        <div id="map"></div>

      </div>
    </main>
  </div>
  <script src="js/scripts.js"></script>
</body>
</html>
